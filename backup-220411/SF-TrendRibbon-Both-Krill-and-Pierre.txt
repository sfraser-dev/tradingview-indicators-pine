//@version=5

indicator(title="Trendribbon", shorttitle="Trendribbon", overlay=true)

M_or_D = input.string("Mono", title="Mono or Dual", options=["Mono", "Dual"], group="Mono or Dual Colored Ribbon")
Mono_or_Dual_select(type) =>
    switch type
        "Mono" => 1
        "Dual" => 0

// inputs
K_or_P = input.string("Krill", title="Krill or Pierre", options=["Krill", "Pierre"], group="Use Krill or Pierre Settings")
Krill_or_Pierre_select(type) =>
    switch type
        "Krill" => 1
        "Pierre" => 0

// krill or pierre settings
krillSelected = Krill_or_Pierre_select(K_or_P)

krillLengthSlowEma = input.int(defval = 21, minval=1, group="Krill Settings") 
krillLengthFastEma = input.int(defval = 13, minval=1) 
krillColorSlowEma = input.color(defval = color.lime)
krillColorFastEma = input.color(defval = color.lime)
krillColorFillBull = input.color(defval = #49d1ba)
krillColorFillBear = input.color(defval = color.red)

pierreLengthSlowEma = input.int(defval = 30, minval=1, group="Pierre Settings") 
pierreLengthFastEma = input.int(defval = 13, minval=1) 
pierreColorSlowEma = input.color(defval = color.blue)
pierreColorFastEma = input.color(defval = color.blue)
pierreColorFillBull = input.color(defval = #00BFFF)
pierreColorFillBear = input.color(defval = color.red)

// select either krill or pierre settings
lengthSlowEma = krillSelected ?  krillLengthSlowEma : pierreLengthSlowEma
lengthFastEma = krillSelected ? krillLengthFastEma : pierreLengthFastEma
colorSlowEma = krillSelected ? krillColorSlowEma : pierreColorSlowEma
colorFastEma = krillSelected ? krillColorFastEma : pierreColorFastEma
colorFillBull = krillSelected ? krillColorFillBull : pierreColorFillBull
colorFillBear = krillSelected ? krillColorFillBear : pierreColorFillBear

// declare EMAs
fastEma = ta.ema(close, lengthFastEma)
slowEma = ta.ema(close, lengthSlowEma)

// draw lines
//transparencySetting=0     // visible outline
//transparencySetting=100   // invisible outline
p1=plot(series=fastEma, title="FastEMA", color=color.new(colorFastEma, 0), linewidth=1)
p2=plot(series=slowEma, title="SlowEMA", color=color.new(colorSlowEma, 0), linewidth=1)

Mono = Mono_or_Dual_select(M_or_D)
fillColorSelect = (fastEma > slowEma) ? colorFillBull : (Mono ?  colorFillBull :  colorFillBear)
fill(p1, p2, fillColorSelect)